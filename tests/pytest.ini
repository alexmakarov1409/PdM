[pytest]
# Основные настройки
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    --color=yes

# Маркеры
markers =
    unit: Unit тесты
    integration: Интеграционные тесты
    e2e: End-to-end тесты
    slow: Медленные тесты (выполняются отдельно)
    database: Тесты базы данных
    performance: Тесты производительности
    security: Тесты безопасности

# Настройки покрытия кода
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Настройки для asyncio
asyncio_mode = auto

# Настройки логов
log_level = INFO
log_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_date_format = %Y-%m-%d %H:%M:%S

# Настройки для отчетов
junit_suite_name = Predictive Maintenance Tests
junit_logging = all
junit_duration_report = call

# Игнорирование путей
norecursedirs = 
    .git
    .pytest_cache
    __pycache__
    *.egg-info
    build
    dist
    venv
    .venv
    env

# Настройки тестов
xfail_strict = true
# Время ожидания для тестов (в секундах)
timeout = 300
timeout_method = thread